<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<title>Walimatul Urus â€“ Haziq & Aina</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts -->test
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Dancing+Script:wght@500;600&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>

:root {
  --soft-blue: #cfd9e8;
  --deep-blue: #5a6c8f;
  --beige: #f6f1eb;
  --gold: #c8b28a;
  --card-bg: #ffffff;
}

/* GLOBAL */
body {
  margin: 0;
  background: linear-gradient(135deg, #fdfdfd, #eef2f6);
  font-family: "Poppins", sans-serif;
  color: #444;
  line-height: 1.7;
}

section {
  padding: 3rem 1.5rem;
  max-width: 900px;
  margin: auto;
}

/* HEADING */
h2 {
  font-family: "Playfair Display", serif;
  font-size: 1.8rem;
  text-align: center;
  margin-bottom: 1rem;
}

/* CARD */
.card {
  background: #ffffff;
  border-radius: 24px;
  padding: 2rem;
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
  border: 1px solid rgba(200,180,150,0.35);
}

/* MUSIC BUTTON */
#musicBtn {
  position: fixed;
  right: 20px;
  bottom: 90px;
  width: 55px;
  height: 55px;
  border-radius: 100%;
  background: #5a6c8f;
  color: white;
  border: none;
  font-size: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  cursor: pointer;
  z-index: 1000;
}

/* WISHES MARQUEE AREA */
.guestbook-strip {
  margin-top: 2rem;
  overflow: hidden;
  position: relative;
  width: 100%;
  padding: 25px 0;
}

.marquee {
  display: flex;
  white-space: nowrap;
  animation: scrollLeft 38s linear infinite;
}

@keyframes scrollLeft {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.marquee-content {
  display: flex;
  gap: 2rem;
}

/* AESTHETIC FLORAL WISH CARD */
.wish-item {
  min-width: 320px;
  max-width: 360px;
  background: url('https://i.imgur.com/x0W8p0B.png'), #ffffff; 
  background-size: cover;
  background-blend-mode: soft-light;
  border-radius: 22px;
  padding: 22px 26px;
  border: 1px solid rgba(200,180,150,0.55);
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  font-family: "Playfair Display", serif;
}

.wish-message {
  font-size: 1.05rem;
  color: #3c3c3c;
  line-height: 1.55;
}

.wish-name {
  margin-top: 12px;
  text-align: right;
  font-family: "Dancing Script", cursive;
  font-size: 1.1rem;
  color: #6a6a6a;
}

/* FORM */
input, textarea, select {
  width: 100%;
  padding: 0.7rem 1rem;
  border-radius: 14px;
  border: 1px solid #d6d6d6;
  background: #fafafa;
  font-size: 0.95rem;
  margin-bottom: 0.7rem;
}

button[type="submit"] {
  padding: 0.7rem 1.5rem;
  border-radius: 14px;
  background: #5a6c8f;
  color: white;
  border: none;
  font-weight: 600;
  cursor: pointer;
  margin-top: 0.5rem;
}

/* TOAST */
.toast {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 20px;
  border-radius: 30px;
  background: white;
  border: 1px solid #dcdcdc;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  opacity: 0;
  transition: 0.2s;
  z-index: 2000;
}
.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(5px);
}

</style>
</head>

<body>

<!-- MUSIC BUTTON -->
<button id="musicBtn">ðŸŽµ</button>
<audio id="bgMusic" src="weddingsong.mp3" loop></audio>

<!-- TOAST -->
<div id="toast" class="toast"></div>

<!-- HERO -->
<section>
  <h2>Haziq & Aina</h2>
  <p style="text-align:center;">Dengan penuh kesyukuran, kami menjemput anda ke majlis walimatul urus.</p>
</section>

<!-- WISH SECTION -->
<section id="wish">
  <div class="card">
    <h2>Titipan Ucapan</h2>
    <p style="text-align:center;">Ucapan penuh bermakna daripada para tetamu ðŸ’Œ</p>

    <form id="wishForm">
      <input type="text" id="wishName" placeholder="Nama" required>
      <textarea id="wishMessage" placeholder="Ucapan" required></textarea>
      <button type="submit">Hantar Ucapan</button>
    </form>

    <!-- AUTO SCROLL -->
    <div class="guestbook-strip">
      <div class="marquee">
        <div class="marquee-content" id="wishesList"></div>
        <div class="marquee-content" id="wishesClone"></div>
      </div>
    </div>
  </div>
</section>

<script>
// CONFIG
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwRep80DpJmbi2jmwyu1RgEeenR2B-6mReb5tgPn36wRh5r2bo-1XDQrF4Jf3saUgTOLA/exec";

// TOAST
function showToast(msg) {
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=> t.classList.remove("show"), 2500);
}

// MUSIC
const music = document.getElementById("bgMusic");
document.getElementById("musicBtn").onclick = ()=>{
  if (music.paused){ music.play(); }
  else { music.pause(); }
};

// LOAD WISHES
async function loadWishes() {
  try {
    const res = await fetch(SCRIPT_URL + "?mode=get");
    const data = await res.json();
    if (data.status !== "success") return;

    data.wishes.forEach(w => {
      addWishToDOM(w.name, w.message);
    });

  } catch (err) { console.log(err); }
}

function addWishToDOM(name, message) {
  const list = document.getElementById("wishesList");
  const cloneList = document.getElementById("wishesClone");

  const item = document.createElement("div");
  item.className = "wish-item";
  item.innerHTML = `
    <div class="wish-message">${message}</div>
    <div class="wish-name">${name}</div>`;

  list.appendChild(item);
  cloneList.appendChild(item.cloneNode(true));
}

loadWishes();

// SUBMIT WISH
document.getElementById("wishForm").addEventListener("submit", async (e)=>{
  e.preventDefault();

  const name = document.getElementById("wishName").value.trim();
  const message = document.getElementById("wishMessage").value.trim();

  await fetch(SCRIPT_URL, {
    method:"POST",
    mode:"no-cors",
    body: JSON.stringify({ mode:"wish", name, message })
  });

  addWishToDOM(name, message);
  showToast("Ucapan berjaya dihantar ðŸ’™");

  document.getElementById("wishForm").reset();
});
</script>

</body>
</html>
